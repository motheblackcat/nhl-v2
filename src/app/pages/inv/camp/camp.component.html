<ion-content [formGroup]="targetForm" (change)="updateTotalWeight()">
  <h3>{{ title }}</h3>
  <div class="hint mb">récup. : récupération PV</div>
  <ng-container *ngFor="let control of targetForm.controls | keyvalue: fm.defaultOrder; let i = index">
    <div *ngIf="control.key !== 'mat'" [formGroupName]="control.key">
      <div class="flexc spaceb mb">
        <label>{{ control.key }}</label>
        <label>Récup.</label>
        <label>Poids</label>
      </div>
      <div class="flexc spaceb">
        <input type="text" formControlName="name" placeholder="Nom" />
        <input type="number" formControlName="pv" placeholder="0" />
        <label class="mr">PV /</label>
        <input type="number" formControlName="h" placeholder="0" />
        <label>H</label>
        <input type="number" formControlName="wei" placeholder="0" class="ion-text-end" />
      </div>
    </div>
    <br />
  </ng-container>
  <div class="flexc spaceb mb">
    <label>Nom</label>
    <label>Poids</label>
  </div>
  <ng-container formArrayName="mat">
    <div class="flexc spaceb mb" *ngFor="let control of matFormArray.controls; let i = index" [formGroupName]="i">
      <ion-icon name="close" (click)="removeItem(i)"></ion-icon>
      <input type="text" formControlName="name" placeholder="nom" />
      <input class="short" type="number" formControlName="wei" placeholder="poids" text-end />
    </div>
  </ng-container>
  <br />
  <div class="flexc mb" (click)="addItem()">
    <ion-icon name="add-circle-outline" class="mr"></ion-icon>
    <label>Ajouter un objet</label>
  </div>
  <br />
  <div class="last ion-text-end">Poids total: {{ pTotal }} Kg</div>
</ion-content>
